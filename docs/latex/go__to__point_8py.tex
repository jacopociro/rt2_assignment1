\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


go to point algorithm for the robot to reach the imposed goal.  


\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespacego__to__point}{go\+\_\+to\+\_\+point}}
\item 
 \mbox{\hyperlink{namespacert2__assignment1}{rt2\+\_\+assignment1}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacego__to__point_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\begin{DoxyCompactList}\small\item\em This function is the /odom subscriber callback. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (state)
\begin{DoxyCompactList}\small\item\em This function handles the state change. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\begin{DoxyCompactList}\small\item\em This function changes the angle to a fixed interval. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a9c3011a3065fcbefcc1c5ad8c9979669}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em This function turns the robot towards the goal. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em This function makes the robot reach the positional goal. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a4a406386ca62830c19c93949e923f7bd}{go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\begin{DoxyCompactList}\small\item\em This function makes sure the robot faces the desired orientation. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\begin{DoxyCompactList}\small\item\em This function is for stopping the robot. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_a48b69278e059ee1f74707fef9342cd90}{go\+\_\+to\+\_\+point.\+time\+\_\+fun}} (t)
\begin{DoxyCompactList}\small\item\em This function publishes a message. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_aa8c9e45da31814a8cd403b354dbd6ba4}{go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point}} (req)
\begin{DoxyCompactList}\small\item\em This function is called with the action server. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_aaf799aba43c0ceff9617df0b8ddd5145}{go\+\_\+to\+\_\+point.\+clbk\+\_\+vel}} (vel)
\begin{DoxyCompactList}\small\item\em Callback function for /vel subscriber. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacego__to__point_ab92bd6db1ec323a4d795ed6cb40aebe1}{go\+\_\+to\+\_\+point.\+main}} ()
\begin{DoxyCompactList}\small\item\em This function initializes the ros node and the various ros publisher, subscribers and action. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacego__to__point_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\item 
int \mbox{\hyperlink{namespacego__to__point_ae444f19eb2019982432760ace036ce03}{go\+\_\+to\+\_\+point.\+yaw\+\_\+}} = 0
\item 
int \mbox{\hyperlink{namespacego__to__point_aa2d0ef255bcf5d5faf9ca2764730fb17}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\item 
\mbox{\hyperlink{namespacego__to__point_a57b4090d0abcbcf0bfa2bcb9329d3036}{go\+\_\+to\+\_\+point.\+pub\+\_\+}} = None
\item 
\mbox{\hyperlink{namespacego__to__point_afc41a9470f0ce9ba018d77ae4d405368}{go\+\_\+to\+\_\+point.\+Velocity}} = Twist()
\item 
int \mbox{\hyperlink{namespacego__to__point_a67f95834f0959feb3facd17bc7fa2b38}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+}} = math.\+pi / 9
\item 
int \mbox{\hyperlink{namespacego__to__point_af74ccf49164d0478ca8343e2031d5813}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+}} = math.\+pi / 90
\item 
float \mbox{\hyperlink{namespacego__to__point_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}{go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+}} = 0.\+1
\item 
float \mbox{\hyperlink{namespacego__to__point_a524106fc7667a0927951dfd89d52d6a7}{go\+\_\+to\+\_\+point.\+kp\+\_\+a}} = -\/3.\+0
\item 
float \mbox{\hyperlink{namespacego__to__point_a7bc498652ca66932e704e738b50c297b}{go\+\_\+to\+\_\+point.\+kp\+\_\+d}} = 0.\+2
\item 
float \mbox{\hyperlink{namespacego__to__point_acb4e14986fafe5cb73bb8ad0c178869d}{go\+\_\+to\+\_\+point.\+ub\+\_\+a}} = 0.\+6
\item 
float \mbox{\hyperlink{namespacego__to__point_afecad4058844db05d8321199e25b4498}{go\+\_\+to\+\_\+point.\+lb\+\_\+a}} = -\/0.\+5
\item 
float \mbox{\hyperlink{namespacego__to__point_a16c473b9e717200c483d18e66b48152a}{go\+\_\+to\+\_\+point.\+ub\+\_\+d}} = 0.\+6
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
go to point algorithm for the robot to reach the imposed goal. 

\begin{DoxyAuthor}{Author}
Jacopo Ciro Soncini 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
24/8/2022
\end{DoxyDate}
Subscribes to\+: ~\newline
 /odom /vel

Publishes to\+: ~\newline
 /cmd\+\_\+vel /target

Services\+: ~\newline
 None

Action Services\+: ~\newline
 /go\+\_\+to\+\_\+point

Description\+: ~\newline
 This node is the node tasked with making sure that the robot reaches the goal, both in orientation and position. The behaviour is handled with 3 states. The first one is tasked with aiming for the goal, using angular velocities. The second state makes sure the robot reaches the goal, giving linear velocities. The last state handles the orientation given with the goal, using angular velocities. The angular and linear velocities are read on the /vel subscriber and sent to the simulation via /cmd\+\_\+vel publisher. The goal is handled with an action. On the /target publisher I publish the number of reached and aborted goal and, in case it is reached, the time to reach it. 